### DO NOT EDIT THIS FILE
### This file is auto-generated by the Dyad command-line compiler.
### If you edit this code it is likely to get overwritten.
### Instead, update the Dyad source code and regenerate this file


@doc Markdown.doc"""
   ThermalHouse(; name, area_floor, height, ratio_L_W, Aratio_window_wall, no_doors, A_door, length, width, volume, area_walls, area_window, area_doors, area_roof, U_walls, U_roof, U_floor, U_window, U_door, SHGC, f_window, rho_air, cp_air, mass_air, C_air, t_dw, rho_dw, cp_dw, C_walls_ceiling, t_floor, rho_floor, cp_floor, C_floor, C_tot, G_wall, G_window, G_roof, G_floor, G_door, G_envelope, U_envelope, ACH_infiltration, ACH_ventilation, ACH_total, m_dot_air, G_infiltration, U_infiltration, G_total, U_total, h_conv, G_conv, Q_people, Q_lighting, Q_appliances, Q_internal, T_initial)

Thermal model of a house with inputs for heat from heater and solar irradiance

## Parameters: 

| Name         | Description                         | Units  |   Default value |
| ------------ | ----------------------------------- | ------ | --------------- |
| `area_floor`         | Building geometry (default 1000 sq ft house)                         | m2  |   92.9 |
| `height`         |                          | m  |   2.44 |
| `ratio_L_W`         |                          | --  |   1.25 |
| `Aratio_window_wall`         | Ratio of window to wall area                         | --  |   0.15 |
| `no_doors`         | Number of doors                         | --  |   2 |
| `A_door`         | Area of single door                         | m2  |   1.75 |
| `length`         |                          | m  |   sqrt(area_floor * ratio_L_W) |
| `width`         |                          | m  |   length / ratio_L_W |
| `volume`         |                          | m3  |   length * width * height |
| `area_walls`         | Total wall area (m²)                         | m2  |   2 * (length * height + width * height) |
| `area_window`         | Total window area (m²)                         | m2  |   Aratio_window_wall * area_walls |
| `area_doors`         | Total door area (m²)                         | m2  |   no_doors * A_door |
| `area_roof`         | Total roof area (m²)                         | m2  |   area_floor |
| `U_walls`         | U-value for walls W/(m²·K)                         | W/(m2.K)  |   0.47 |
| `U_roof`         | U-value for roof W/(m²·K)                         | W/(m2.K)  |   0.15 |
| `U_floor`         | U-value for floor W/(m²·K)                         | W/(m2.K)  |   0.35 |
| `U_window`         | U-value for windows W/(m²·K)                         | W/(m2.K)  |   2.2 |
| `U_door`         | U-value for door W/(m²·K)                         | W/(m2.K)  |   1.2 |
| `SHGC`         | Window solar heat gain coefficient                         | --  |   0.6 |
| `f_window`         | Window orientation factor for sun-facing windows                         | --  |   0.3 |
| `rho_air`         | Thermal mass (air + structure)                         | kg/m3  |   1.2 |
| `cp_air`         |                          | J/(kg.K)  |   1005 |
| `mass_air`         |                          | kg  |   rho_air * volume |
| `C_air`         |                          | J/K  |   mass_air * cp_air |
| `t_dw`         | Drywall thermal mass                         | m  |   0.0127 |
| `rho_dw`         |                          | kg/m3  |   800 |
| `cp_dw`         |                          | J/(kg.K)  |   1000 |
| `C_walls_ceiling`         |                          | J/K  |   (area_floor + area_walls) * t_dw * rho_dw * cp_dw |
| `t_floor`         | Floor thermal mass                         | m  |   0.019 |
| `rho_floor`         |                          | kg/m3  |   700 |
| `cp_floor`         |                          | J/(kg.K)  |   1600 |
| `C_floor`         |                          | J/K  |   area_floor * t_floor * rho_floor * cp_floor |
| `C_tot`         | Total thermal capacitance                         | J/K  |   C_air + C_walls_ceiling + C_floor |
| `G_wall`         | Envelope conductances                         | W/K  |   U_walls * area_walls |
| `G_window`         |                          | W/K  |   U_window * area_window |
| `G_roof`         |                          | W/K  |   U_roof * area_roof |
| `G_floor`         |                          | W/K  |   U_floor * area_floor |
| `G_door`         |                          | W/K  |   U_door * area_doors |
| `G_envelope`         |                          | W/K  |   G_wall + G_window + G_roof + G_door + G_floor |
| `U_envelope`         | Envelope U-value relative to floor area W/(m²·K)                         | W/(m2.K)  |   G_envelope / area_floor |
| `ACH_infiltration`         | Natural infiltration (ACH = air changes per hour)                         | --  |   0.35 |
| `ACH_ventilation`         | Mechanical ventilation (ASHRAE 62.2)                         | --  |   0.15 |
| `ACH_total`         |                          | --  |   ACH_infiltration + ACH_ventilation |
| `m_dot_air`         | Air mass flow rate (kg/s)                         | --  |   (ACH_total * volume * rho_air) / 3600 |
| `G_infiltration`         |                          | W/K  |   m_dot_air * cp_air |
| `U_infiltration`         | Infiltration U-value relative to floor area W/(m²·K)                         | W/(m2.K)  |   G_infiltration / area_floor |
| `G_total`         | Total conductance (envelope + infiltration)                         | W/K  |   G_envelope + G_infiltration |
| `U_total`         | Total U-value relative to floor area W/(m²·K)                         | W/(m2.K)  |   U_infiltration + U_envelope |
| `h_conv`         | Convection at exterior surface                         | W/(m2.K)  |   10 |
| `G_conv`         |                          | W/K  |   h_conv * area_walls |
| `Q_people`         | Occupant sensible heat                         | W  |   0 |
| `Q_lighting`         | Lighting heat                         | W  |   0 |
| `Q_appliances`         | Appliance heat                         | W  |   0 |
| `Q_internal`         |                          | W  |   Q_people + Q_lighting + Q_appliances |
| `T_initial`         | Temperature references                         | K  |   293.15 |

## Connectors

 * `interior` - This connector represents a thermal node with temperature and heat flow as the potential and flow variables, respectively. ([`Node`](@ref))
 * `wall_surface` - This connector represents a thermal node with temperature and heat flow as the potential and flow variables, respectively. ([`Node`](@ref))
 * `Q_heater` - This connector represents a real signal as an input to a component ([`RealInput`](@ref))
 * `solar_irradiance` - This connector represents a real signal as an input to a component ([`RealInput`](@ref))
 * `T_ambient` - This connector represents a real signal as an input to a component ([`RealInput`](@ref))
 * `T_interior` - This connector represents a real signal as an output from a component ([`RealOutput`](@ref))

## Variables

| Name         | Description                         | Units  | 
| ------------ | ----------------------------------- | ------ | 
| `T_wall`         |                          | K  | 
"""
@component function ThermalHouse(; name, area_floor=92.9, height=2.44, ratio_L_W=1.25, Aratio_window_wall=0.15, no_doors=2, A_door=1.75, length=sqrt(area_floor * ratio_L_W), width=length / ratio_L_W, volume=length * width * height, area_walls=2 * (length * height + width * height), area_window=Aratio_window_wall * area_walls, area_doors=no_doors * A_door, area_roof=area_floor, U_walls=0.47, U_roof=0.15, U_floor=0.35, U_window=2.2, U_door=1.2, SHGC=0.6, f_window=0.3, rho_air=1.2, cp_air=1005, mass_air=rho_air * volume, C_air=mass_air * cp_air, t_dw=0.0127, rho_dw=800, cp_dw=1000, C_walls_ceiling=(area_floor + area_walls) * t_dw * rho_dw * cp_dw, t_floor=0.019, rho_floor=700, cp_floor=1600, C_floor=area_floor * t_floor * rho_floor * cp_floor, C_tot=C_air + C_walls_ceiling + C_floor, G_wall=U_walls * area_walls, G_window=U_window * area_window, G_roof=U_roof * area_roof, G_floor=U_floor * area_floor, G_door=U_door * area_doors, G_envelope=G_wall + G_window + G_roof + G_door + G_floor, U_envelope=G_envelope / area_floor, ACH_infiltration=0.35, ACH_ventilation=0.15, ACH_total=ACH_infiltration + ACH_ventilation, m_dot_air=(ACH_total * volume * rho_air) / 3600, G_infiltration=m_dot_air * cp_air, U_infiltration=G_infiltration / area_floor, G_total=G_envelope + G_infiltration, U_total=U_infiltration + U_envelope, h_conv=10, G_conv=h_conv * area_walls, Q_people=0, Q_lighting=0, Q_appliances=0, Q_internal=Q_people + Q_lighting + Q_appliances, T_initial=293.15)
  __params = Any[]
  __vars = Any[]
  __systems = System[]
  __guesses = Dict()
  __defaults = Dict()
  __initialization_eqs = []
  __eqs = Equation[]

  ### Symbolic Parameters
  append!(__params, @parameters (area_floor::Real = area_floor), [description = "Building geometry (default 1000 sq ft house)"])
  append!(__params, @parameters (height::Real = height))
  append!(__params, @parameters (ratio_L_W::Real = ratio_L_W))
  append!(__params, @parameters (Aratio_window_wall::Real = Aratio_window_wall), [description = "Ratio of window to wall area"])
  append!(__params, @parameters (no_doors::Real = no_doors), [description = "Number of doors"])
  append!(__params, @parameters (A_door::Real = A_door), [description = "Area of single door"])
  append!(__params, @parameters (length::Real = length))
  append!(__params, @parameters (width::Real = width))
  append!(__params, @parameters (volume::Real = volume))
  append!(__params, @parameters (area_walls::Real = area_walls), [description = "Total wall area (m²)"])
  append!(__params, @parameters (area_window::Real = area_window), [description = "Total window area (m²)"])
  append!(__params, @parameters (area_doors::Real = area_doors), [description = "Total door area (m²)"])
  append!(__params, @parameters (area_roof::Real = area_roof), [description = "Total roof area (m²)"])
  append!(__params, @parameters (U_walls::Real = U_walls), [description = "U-value for walls W/(m²·K)"])
  append!(__params, @parameters (U_roof::Real = U_roof), [description = "U-value for roof W/(m²·K)"])
  append!(__params, @parameters (U_floor::Real = U_floor), [description = "U-value for floor W/(m²·K)"])
  append!(__params, @parameters (U_window::Real = U_window), [description = "U-value for windows W/(m²·K)"])
  append!(__params, @parameters (U_door::Real = U_door), [description = "U-value for door W/(m²·K)"])
  append!(__params, @parameters (SHGC::Real = SHGC), [description = "Window solar heat gain coefficient"])
  append!(__params, @parameters (f_window::Real = f_window), [description = "Window orientation factor for sun-facing windows"])
  append!(__params, @parameters (rho_air::Real = rho_air), [description = "Thermal mass (air + structure)"])
  append!(__params, @parameters (cp_air::Real = cp_air))
  append!(__params, @parameters (mass_air::Real = mass_air))
  append!(__params, @parameters (C_air::Real = C_air))
  append!(__params, @parameters (t_dw::Real = t_dw), [description = "Drywall thermal mass"])
  append!(__params, @parameters (rho_dw::Real = rho_dw))
  append!(__params, @parameters (cp_dw::Real = cp_dw))
  append!(__params, @parameters (C_walls_ceiling::Real = C_walls_ceiling))
  append!(__params, @parameters (t_floor::Real = t_floor), [description = "Floor thermal mass"])
  append!(__params, @parameters (rho_floor::Real = rho_floor))
  append!(__params, @parameters (cp_floor::Real = cp_floor))
  append!(__params, @parameters (C_floor::Real = C_floor))
  append!(__params, @parameters (C_tot::Real = C_tot), [description = "Total thermal capacitance"])
  append!(__params, @parameters (G_wall::Real = G_wall), [description = "Envelope conductances"])
  append!(__params, @parameters (G_window::Real = G_window))
  append!(__params, @parameters (G_roof::Real = G_roof))
  append!(__params, @parameters (G_floor::Real = G_floor))
  append!(__params, @parameters (G_door::Real = G_door))
  append!(__params, @parameters (G_envelope::Real = G_envelope))
  append!(__params, @parameters (U_envelope::Real = U_envelope), [description = "Envelope U-value relative to floor area W/(m²·K)"])
  append!(__params, @parameters (ACH_infiltration::Real = ACH_infiltration), [description = "Natural infiltration (ACH = air changes per hour)"])
  append!(__params, @parameters (ACH_ventilation::Real = ACH_ventilation), [description = "Mechanical ventilation (ASHRAE 62.2)"])
  append!(__params, @parameters (ACH_total::Real = ACH_total))
  append!(__params, @parameters (m_dot_air::Real = m_dot_air), [description = "Air mass flow rate (kg/s)"])
  append!(__params, @parameters (G_infiltration::Real = G_infiltration))
  append!(__params, @parameters (U_infiltration::Real = U_infiltration), [description = "Infiltration U-value relative to floor area W/(m²·K)"])
  append!(__params, @parameters (G_total::Real = G_total), [description = "Total conductance (envelope + infiltration)"])
  append!(__params, @parameters (U_total::Real = U_total), [description = "Total U-value relative to floor area W/(m²·K)"])
  append!(__params, @parameters (h_conv::Real = h_conv), [description = "Convection at exterior surface"])
  append!(__params, @parameters (G_conv::Real = G_conv))
  append!(__params, @parameters (Q_people::Real = Q_people), [description = "Occupant sensible heat"])
  append!(__params, @parameters (Q_lighting::Real = Q_lighting), [description = "Lighting heat"])
  append!(__params, @parameters (Q_appliances::Real = Q_appliances), [description = "Appliance heat"])
  append!(__params, @parameters (Q_internal::Real = Q_internal))
  append!(__params, @parameters (T_initial::Real = T_initial), [description = "Temperature references"])

  ### Variables
  append!(__vars, @variables (Q_heater(t)::Real), [input = true])
  append!(__vars, @variables (solar_irradiance(t)::Real), [input = true])
  append!(__vars, @variables (T_ambient(t)::Real), [input = true])
  append!(__vars, @variables (T_interior(t)::Real), [output = true])
  append!(__vars, @variables (T_wall(t)::Real), [guess = 283.15])

  ### Constants
  __constants = Any[]

  ### Components
  push!(__systems, @named interior = __Dyad__Node())
  push!(__systems, @named wall_surface = __Dyad__Node())
  push!(__systems, @named thermal_mass = ThermalComponents.HeatCapacitor(C=C_tot, T0=T_initial))
  push!(__systems, @named solar_input = ThermalComponents.PrescribedHeatFlow())
  push!(__systems, @named heater = ThermalComponents.PrescribedHeatFlow())
  push!(__systems, @named internal_gains = ThermalComponents.PrescribedHeatFlow())
  push!(__systems, @named window_loss = ThermalComponents.ThermalConductor(G=G_window))
  push!(__systems, @named door_loss = ThermalComponents.ThermalConductor(G=G_door))
  push!(__systems, @named roof_loss = ThermalComponents.ThermalConductor(G=G_roof))
  push!(__systems, @named floor_loss = ThermalComponents.ThermalConductor(G=G_floor))
  push!(__systems, @named infiltration_loss = ThermalComponents.ThermalConductor(G=G_infiltration))
  push!(__systems, @named wall_loss = ThermalComponents.ThermalConductor(G=G_wall))
  push!(__systems, @named wall_convection = ThermalComponents.ThermalConductor(G=G_conv))
  push!(__systems, @named ambient = ThermalComponents.PrescribedTemperature())

  ### Guesses

  ### Defaults

  ### Initialization Equations

  ### Assertions
  __assertions = []

  ### Equations
  push!(__eqs, solar_input.Q ~ solar_irradiance * area_window * f_window * SHGC)
  push!(__eqs, internal_gains.Q ~ Q_internal)
  push!(__eqs, T_wall ~ wall_surface.T)
  # Connect interior temperature to output signal
  push!(__eqs, T_interior ~ thermal_mass.T)
  # Connect thermal mass to interior node
  push!(__eqs, connect(thermal_mass.node, interior))
  # Connect input signals to heat flow components
  push!(__eqs, connect(heater.Q, Q_heater))
  # Connect ambient temperature input to boundary condition
  push!(__eqs, connect(ambient.T, T_ambient))
  # Connect heat sources
  push!(__eqs, connect(solar_input.node, interior))
  push!(__eqs, connect(heater.node, interior))
  push!(__eqs, connect(internal_gains.node, interior))
  # Connect losses (walls + windows + floor + doors + infiltration)
  push!(__eqs, connect(roof_loss.node_a, interior))
  push!(__eqs, connect(roof_loss.node_b, ambient.node))
  push!(__eqs, connect(floor_loss.node_a, interior))
  push!(__eqs, connect(floor_loss.node_b, ambient.node))
  push!(__eqs, connect(window_loss.node_a, interior))
  push!(__eqs, connect(window_loss.node_b, ambient.node))
  push!(__eqs, connect(door_loss.node_a, interior))
  push!(__eqs, connect(door_loss.node_b, ambient.node))
  push!(__eqs, connect(infiltration_loss.node_a, interior))
  push!(__eqs, connect(infiltration_loss.node_b, ambient.node))
  # Wall surface temperature (for detailed analysis)
  push!(__eqs, connect(wall_loss.node_a, interior))
  push!(__eqs, connect(wall_loss.node_b, wall_surface))
  push!(__eqs, connect(wall_convection.node_a, wall_surface))
  push!(__eqs, connect(wall_convection.node_b, ambient.node))

  # Return completely constructed System
  return System(__eqs, t, __vars, __params; systems=__systems, defaults=__defaults, guesses=__guesses, name, initialization_eqs=__initialization_eqs, assertions=__assertions)
end
export ThermalHouse
